import{useRef as e,useState as n,useEffect as t}from"react";import{Conversation as r}from"@elevenlabs/client";export{postOverallFeedback}from"@elevenlabs/client";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(null,arguments)}const l=["micMuted","volume"];function a(a={}){const{micMuted:c,volume:o}=a,s=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(a,l),i=e(null),d=e(null),[v,p]=n("disconnected"),[g,m]=n(!1),[y,f]=n("listening");return t(()=>{var e;void 0!==c&&(null==i||null==(e=i.current)||e.setMicMuted(c))},[c]),t(()=>{var e;void 0!==o&&(null==i||null==(e=i.current)||e.setVolume({volume:o}))},[o]),t(()=>()=>{var e;null==(e=i.current)||e.endSession()},[]),{startSession:async e=>{var n;if(null!=(n=i.current)&&n.isOpen())return i.current.getId();if(d.current)return(await d.current).getId();try{return d.current=r.startSession(u({},null!=s?s:{},null!=e?e:{},{onModeChange:({mode:e})=>{f(e)},onStatusChange:({status:e})=>{p(e)},onCanSendFeedbackChange:({canSendFeedback:e})=>{m(e)}})),i.current=await d.current,void 0!==c&&i.current.setMicMuted(c),void 0!==o&&i.current.setVolume({volume:o}),i.current.getId()}finally{d.current=null}},endSession:async()=>{const e=i.current;i.current=null,await(null==e?void 0:e.endSession())},setVolume:({volume:e})=>{var n;null==(n=i.current)||n.setVolume({volume:e})},getInputByteFrequencyData:()=>{var e;return null==(e=i.current)?void 0:e.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var e;return null==(e=i.current)?void 0:e.getOutputByteFrequencyData()},getInputVolume:()=>{var e,n;return null!=(e=null==(n=i.current)?void 0:n.getInputVolume())?e:0},getOutputVolume:()=>{var e,n;return null!=(e=null==(n=i.current)?void 0:n.getOutputVolume())?e:0},sendFeedback:e=>{var n;null==(n=i.current)||n.sendFeedback(e)},getId:()=>{var e;return null==(e=i.current)?void 0:e.getId()},sendContextualUpdate:e=>{var n;null==(n=i.current)||n.sendContextualUpdate(e)},sendUserMessage:e=>{var n;null==(n=i.current)||n.sendUserMessage(e)},sendUserActivity:()=>{var e;null==(e=i.current)||e.sendUserActivity()},sendMCPToolApprovalResult:(e,n)=>{var t;null==(t=i.current)||t.sendMCPToolApprovalResult(e,n)},status:v,canSendFeedback:g,micMuted:c,isSpeaking:"speaking"===y}}export{a as useConversation};
//# sourceMappingURL=lib.modern.js.map
