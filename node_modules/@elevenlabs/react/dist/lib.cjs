var e=require("react"),n=require("@elevenlabs/client");function t(){return t=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},t.apply(null,arguments)}var r=["micMuted","volume"];Object.defineProperty(exports,"postOverallFeedback",{enumerable:!0,get:function(){return n.postOverallFeedback}}),exports.useConversation=function(u){void 0===u&&(u={});var o=u.micMuted,l=u.volume,c=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(u,r),i=e.useRef(null),a=e.useRef(null),s=e.useState("disconnected"),v=s[0],d=s[1],f=e.useState(!1),m=f[0],p=f[1],g=e.useState("listening"),h=g[0],y=g[1];return e.useEffect(function(){var e;void 0!==o&&(null==i||null==(e=i.current)||e.setMicMuted(o))},[o]),e.useEffect(function(){var e;void 0!==l&&(null==i||null==(e=i.current)||e.setVolume({volume:l}))},[l]),e.useEffect(function(){return function(){var e;null==(e=i.current)||e.endSession()}},[]),{startSession:function(e){try{var r,u,s=function(r){return u?r:function(r,u){try{var s=(a.current=n.Conversation.startSession(t({},null!=c?c:{},null!=e?e:{},{onModeChange:function(e){y(e.mode)},onStatusChange:function(e){d(e.status)},onCanSendFeedbackChange:function(e){p(e.canSendFeedback)}})),Promise.resolve(a.current).then(function(e){return i.current=e,void 0!==o&&i.current.setMicMuted(o),void 0!==l&&i.current.setVolume({volume:l}),i.current.getId()}))}catch(e){return u(!0,e)}return s&&s.then?s.then(u.bind(null,!1),u.bind(null,!0)):u(!1,s)}(0,function(e,n){if(a.current=null,e)throw n;return n})};if(null!=(r=i.current)&&r.isOpen())return Promise.resolve(i.current.getId());var v=function(){if(a.current)return Promise.resolve(a.current).then(function(e){var n=e.getId();return u=1,n})}();return Promise.resolve(v&&v.then?v.then(s):s(v))}catch(e){return Promise.reject(e)}},endSession:function(){try{var e=i.current;return i.current=null,Promise.resolve(null==e?void 0:e.endSession()).then(function(){})}catch(e){return Promise.reject(e)}},setVolume:function(e){var n;null==(n=i.current)||n.setVolume({volume:e.volume})},getInputByteFrequencyData:function(){var e;return null==(e=i.current)?void 0:e.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var e;return null==(e=i.current)?void 0:e.getOutputByteFrequencyData()},getInputVolume:function(){var e,n;return null!=(e=null==(n=i.current)?void 0:n.getInputVolume())?e:0},getOutputVolume:function(){var e,n;return null!=(e=null==(n=i.current)?void 0:n.getOutputVolume())?e:0},sendFeedback:function(e){var n;null==(n=i.current)||n.sendFeedback(e)},getId:function(){var e;return null==(e=i.current)?void 0:e.getId()},sendContextualUpdate:function(e){var n;null==(n=i.current)||n.sendContextualUpdate(e)},sendUserMessage:function(e){var n;null==(n=i.current)||n.sendUserMessage(e)},sendUserActivity:function(){var e;null==(e=i.current)||e.sendUserActivity()},sendMCPToolApprovalResult:function(e,n){var t;null==(t=i.current)||t.sendMCPToolApprovalResult(e,n)},status:v,canSendFeedback:m,micMuted:o,isSpeaking:"speaking"===h}};
//# sourceMappingURL=lib.cjs.map
