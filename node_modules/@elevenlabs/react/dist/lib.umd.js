!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("@elevenlabs/client")):"function"==typeof define&&define.amd?define(["exports","react","@elevenlabs/client"],n):n((e||self).react={},e.react,e.client)}(this,function(e,n,t){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(null,arguments)}var u=["micMuted","volume"];Object.defineProperty(e,"postOverallFeedback",{enumerable:!0,get:function(){return t.postOverallFeedback}}),e.useConversation=function(e){void 0===e&&(e={});var o=e.micMuted,l=e.volume,c=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(e,u),i=n.useRef(null),a=n.useRef(null),s=n.useState("disconnected"),d=s[0],f=s[1],v=n.useState(!1),p=v[0],m=v[1],g=n.useState("listening"),y=g[0],h=g[1];return n.useEffect(function(){var e;void 0!==o&&(null==i||null==(e=i.current)||e.setMicMuted(o))},[o]),n.useEffect(function(){var e;void 0!==l&&(null==i||null==(e=i.current)||e.setVolume({volume:l}))},[l]),n.useEffect(function(){return function(){var e;null==(e=i.current)||e.endSession()}},[]),{startSession:function(e){try{var n,u,s=function(n){return u?n:function(n,u){try{var s=(a.current=t.Conversation.startSession(r({},null!=c?c:{},null!=e?e:{},{onModeChange:function(e){h(e.mode)},onStatusChange:function(e){f(e.status)},onCanSendFeedbackChange:function(e){m(e.canSendFeedback)}})),Promise.resolve(a.current).then(function(e){return i.current=e,void 0!==o&&i.current.setMicMuted(o),void 0!==l&&i.current.setVolume({volume:l}),i.current.getId()}))}catch(e){return u(!0,e)}return s&&s.then?s.then(u.bind(null,!1),u.bind(null,!0)):u(!1,s)}(0,function(e,n){if(a.current=null,e)throw n;return n})};if(null!=(n=i.current)&&n.isOpen())return Promise.resolve(i.current.getId());var d=function(){if(a.current)return Promise.resolve(a.current).then(function(e){var n=e.getId();return u=1,n})}();return Promise.resolve(d&&d.then?d.then(s):s(d))}catch(e){return Promise.reject(e)}},endSession:function(){try{var e=i.current;return i.current=null,Promise.resolve(null==e?void 0:e.endSession()).then(function(){})}catch(e){return Promise.reject(e)}},setVolume:function(e){var n;null==(n=i.current)||n.setVolume({volume:e.volume})},getInputByteFrequencyData:function(){var e;return null==(e=i.current)?void 0:e.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var e;return null==(e=i.current)?void 0:e.getOutputByteFrequencyData()},getInputVolume:function(){var e,n;return null!=(e=null==(n=i.current)?void 0:n.getInputVolume())?e:0},getOutputVolume:function(){var e,n;return null!=(e=null==(n=i.current)?void 0:n.getOutputVolume())?e:0},sendFeedback:function(e){var n;null==(n=i.current)||n.sendFeedback(e)},getId:function(){var e;return null==(e=i.current)?void 0:e.getId()},sendContextualUpdate:function(e){var n;null==(n=i.current)||n.sendContextualUpdate(e)},sendUserMessage:function(e){var n;null==(n=i.current)||n.sendUserMessage(e)},sendUserActivity:function(){var e;null==(e=i.current)||e.sendUserActivity()},sendMCPToolApprovalResult:function(e,n){var t;null==(t=i.current)||t.sendMCPToolApprovalResult(e,n)},status:d,canSendFeedback:p,micMuted:o,isSpeaking:"speaking"===y}}});
//# sourceMappingURL=lib.umd.js.map
